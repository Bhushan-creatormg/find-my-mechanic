<!-- admin.html -->
<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Admin Panel</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-dark text-white">
  <div class="container mt-5">
    <h2 class="text-center mb-4">Admin Dashboard</h2>
    <div id="mechanicList"></div>
  </div>

  <script type="module">
    import { db, collection, getDocs, updateDoc, doc } from './firebase.js';

    const mechanicList = document.getElementById("mechanicList");
    const snapshot = await getDocs(collection(db, "mechanics"));

    snapshot.forEach(docSnap => {
      const data = docSnap.data();
      const div = document.createElement("div");
      div.className = "card mb-2 p-3 bg-secondary";
      div.innerHTML = `
        <h5>${data.name} (${data.experience} yrs)</h5>
        <p>Location: ${data.location}<br>Specialization: ${data.specialization}</p>
        <button class="btn btn-success" onclick="approveMechanic('${docSnap.id}')">Approve</button>
      `;
      mechanicList.appendChild(div);
    });

    window.approveMechanic = async (id) => {
      const mechanicRef = doc(db, "mechanics", id);
      await updateDoc(mechanicRef, { approved: true });
      alert("Mechanic approved. Reload to see updates.");
    };
  </script>
</body>
</html>
